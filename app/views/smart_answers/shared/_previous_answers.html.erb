<% if visited_node_presenters.present? %>
  <%= render "govuk_publishing_components/components/heading", {
    text: local_assigns[:hide_previous_answers] ? "Change your answers" : "Your answers",
    heading_level: 2,
    font_size: "m",
    margin_bottom: 4
  } %>

  <%= tag.p class: "govuk-body" do %>
    <%= link_to "Start again",
      restart_flow_path,
      class: "govuk-link",
      data: {
        module: "gem-track-click",
        "track-action": "Start again",
        "track-category": "StartAgain",
        "track-label": node_presenter.title
      } %>
  <% end %>

   <% unless local_assigns[:hide_previous_answers] %>
    <% items = previous_questions.map { |question_presenter|

      if question_presenter.multiple_responses?
        value = render "govuk_publishing_components/components/list", {
          items: question_presenter.response_labels
        }
      else
        value = question_presenter.response_label
      end

      {
        field: question_presenter.title,
        value: value,
        edit: {
          href: change_answer_link(question_presenter),
          data_attributes: {
            "module": "gem-track-click",
            "track-category": "Smart Answer Change Link",
            "track-action":  "Link clicked",
            "track-label": "#{question_presenter.title} / #{question_presenter.response_label}"
          }
        }
      }
    } %>

    <%= render "govuk_publishing_components/components/summary_list", {
      wide_title: true,
      items: items
    } %>
  <% end %>
<% end %>
